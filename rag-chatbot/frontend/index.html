<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book RAG Chatbot</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        header {
            background: #4f46e5;
            color: white;
            padding: 20px;
            text-align: center;
        }

        header h1 {
            margin-bottom: 10px;
        }

        .chat-container {
            height: 500px;
            display: flex;
            flex-direction: column;
        }

        .chat-history {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background-color: #f9fafb;
        }

        .message {
            margin-bottom: 15px;
            padding: 12px 15px;
            border-radius: 8px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .user-message {
            background-color: #e0f2fe;
            margin-left: auto;
            text-align: right;
        }

        .bot-message {
            background-color: #f0fdf4;
        }

        .selected-text-badge {
            display: inline-block;
            background-color: #fef3c7;
            color: #92400e;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8em;
            margin-top: 5px;
        }

        .input-section {
            padding: 20px;
            border-top: 1px solid #e5e7eb;
            display: flex;
            gap: 10px;
        }

        #userInput {
            flex: 1;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 5px;
            resize: vertical;
            font-family: inherit;
        }

        button {
            padding: 12px 20px;
            background-color: #4f46e5;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #4338ca;
        }

        #askSelectedButton {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #10b981;
            padding: 12px 16px;
            border-radius: 50px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            z-index: 1000;
            font-size: 14px;
        }

        #askSelectedButton:hover {
            background-color: #059669;
        }

        #askSelectedButton.hidden {
            display: none;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(0,0,0,.1);
            border-radius: 50%;
            border-top-color: #4f46e5;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .error {
            color: #dc2626;
            background-color: #fef2f2;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Book RAG Chatbot</h1>
            <p>Ask questions about the book content</p>
        </header>

        <div class="chat-container">
            <div class="chat-history" id="chatHistory">
                <div class="message bot-message">
                    <strong>Bot:</strong> Hello! I'm your book assistant. You can ask me questions about the book content. 
                    You can also select text on the page and click the floating button to ask about that specific text.
                </div>
            </div>

            <div class="input-section">
                <textarea 
                    id="userInput" 
                    placeholder="Ask a question about the book..." 
                    rows="3"
                ></textarea>
                <button id="sendButton">Send</button>
            </div>
        </div>
    </div>

    <button id="askSelectedButton" class="hidden">ðŸ’¬ Ask about selected text</button>

    <script src="chat.js"></script>
</body>
</html>